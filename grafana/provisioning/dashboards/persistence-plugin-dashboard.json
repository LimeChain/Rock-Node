{
  "__inputs": [],
  "__requires": [ { "type": "grafana", "id": "grafana", "name": "Grafana", "version": "10.0.0" }, { "type": "datasource", "id": "prometheus", "name": "Prometheus", "version": "1.0.0" } ],
  "annotations": { "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ] },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [
    { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 100, "panels": [], "title": "Persistence Plugin", "type": "row" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 0, "y": 1 }, "id": 101, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "sum(rate(rocknode_persistence_writes_total[$__rate_interval]))", "legendFormat": "Writes/sec", "refId": "A" } ], "title": "Total Write Rate", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 6, "y": 1 }, "id": 102, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "sum(rate(rocknode_persistence_reads_total[$__rate_interval]))", "legendFormat": "Reads/sec", "refId": "A" } ], "title": "Total Read Rate", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 12, "y": 1 }, "id": 103, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_persistence_write_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" } ], "title": "p99 Write Latency", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 18, "y": 1 }, "id": 104, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_persistence_read_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" } ], "title": "p99 Read Latency", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "short" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 9 }, "id": 105, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "rocknode_persistence_hot_tier_block_count", "legendFormat": "Hot Tier", "refId": "A" }, { "expr": "rocknode_persistence_cold_tier_block_count", "legendFormat": "Cold Tier", "refId": "B" } ], "title": "Tier Block Counts", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisCenteredZero": false, "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 9 }, "id": 106, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "sum(rate(rocknode_persistence_writes_total[$__rate_interval])) by (type)", "legendFormat": "{{type}}", "refId": "A" } ], "title": "Write Rate by Type", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 10, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 18 }, "id": 107, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "sum(rate(rocknode_persistence_reads_total[$__rate_interval])) by (tier)", "legendFormat": "{{tier}}", "refId": "A" } ], "title": "Read Rate by Tier", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "s" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 18 }, "id": 108, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "histogram_quantile(0.95, sum(rate(rocknode_persistence_archival_cycle_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p95", "refId": "A" } ], "title": "Archival Cycle Duration", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 0, "y": 27 }, "id": 109, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "sum(rate(rocknode_persistence_event_duration_seconds_sum[$__rate_interval])) / sum(rate(rocknode_persistence_event_duration_seconds_count[$__rate_interval]))", "legendFormat": "Avg", "refId": "A" } ], "title": "Average End-to-End Write Time", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 6, "y": 27 }, "id": 110, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_persistence_event_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" } ], "title": "p99 End-to-End Write Latency", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "s" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 35 }, "id": 111, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_persistence_event_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" }, { "expr": "histogram_quantile(0.95, sum(rate(rocknode_persistence_event_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p95", "refId": "B" }, { "expr": "histogram_quantile(0.50, sum(rate(rocknode_persistence_event_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p50", "refId": "C" } ], "title": "End-to-End Persistence Duration", "type": "timeseries" }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "style": "dark",
  "tags": [ "rock-node" ],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "timepicker": {},
  "timezone": "browser",
  "title": "Rock Node - Persistence Plugin",
  "uid": "rock-node-persistence-v1",
  "version": 1,
  "weekStart": "" }

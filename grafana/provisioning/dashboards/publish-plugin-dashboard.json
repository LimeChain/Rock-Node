{
  "__inputs": [],
  "__requires": [
    { "type": "grafana", "id": "grafana", "name": "Grafana", "version": "10.0.0" },
    { "type": "datasource", "id": "prometheus", "name": "Prometheus", "version": "1.0.0" }
  ],
  "annotations": {
    "list": [ { "builtIn": 1, "datasource": { "type": "grafana", "uid": "-- Grafana --" }, "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "type": "dashboard" } ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 0,
  "id": null,
  "links": [],
  "panels": [
    { "collapsed": false, "gridPos": { "h": 1, "w": 24, "x": 0, "y": 0 }, "id": 40, "panels": [], "title": "Publish Plugin", "type": "row" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] } }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 0, "y": 1 }, "id": 41, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "rocknode_active_publish_sessions", "legendFormat": "Active Sessions", "refId": "A" } ], "title": "Active Publisher Sessions", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "Bps" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 6, "y": 1 }, "id": 42, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "sum(rate(rocknode_blocks_acknowledged[$__rate_interval]))", "legendFormat": "Blocks/sec", "refId": "A" } ], "title": "Blocks Ack Rate", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null } ] }, "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 12, "y": 1 }, "id": 43, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_publish_persistence_duration_seconds_bucket{outcome=\"acknowledged\"}[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" } ], "title": "p99 Persistence Duration", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "thresholds" }, "mappings": [], "thresholds": { "mode": "absolute", "steps": [ { "color": "green", "value": null }, { "color": "red", "value": 0.1 } ] }, "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 18, "y": 1 }, "id": 44, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "sum(rate(rocknode_publish_persistence_duration_seconds_count{outcome=\"timeout\"}[$__rate_interval]))", "legendFormat": "Timeouts/sec", "refId": "A" } ], "title": "Persistence Timeouts", "type": "stat" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisCenteredZero": false, "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 25, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 9 }, "id": 45, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "sum(rate(rocknode_publish_blocks_received_total[$__rate_interval])) by (outcome)", "legendFormat": "{{outcome}}", "refId": "A" } ], "title": "Incoming Block Race Outcomes", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisCenteredZero": false, "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 25, "gradientMode": "opacity", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "smooth", "lineWidth": 1, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "normal" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "ops" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 9 }, "id": 46, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "sum(rate(rocknode_publish_responses_sent_total[$__rate_interval])) by (response_type)", "legendFormat": "{{response_type}}", "refId": "A" } ], "title": "Responses Sent to Publishers", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisCenteredZero": false, "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "s" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 18 }, "id": 47, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_publish_persistence_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" }, { "expr": "histogram_quantile(0.95, sum(rate(rocknode_publish_persistence_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p95", "refId": "B" }, { "expr": "histogram_quantile(0.50, sum(rate(rocknode_publish_persistence_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p50", "refId": "C" } ], "title": "End-to-End Persistence Duration", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisBorderShow": false, "axisCenteredZero": false, "axisColorMode": "text", "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "s" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 12, "y": 18 }, "id": 48, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_publish_lifecycle_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" }, { "expr": "histogram_quantile(0.95, sum(rate(rocknode_publish_lifecycle_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p95", "refId": "B" }, { "expr": "histogram_quantile(0.50, sum(rate(rocknode_publish_lifecycle_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p50", "refId": "C" } ], "title": "End-to-End Lifecycle Duration", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "color": { "mode": "palette-classic" }, "custom": { "axisCenteredZero": false, "axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": { "legend": false, "tooltip": false, "viz": false }, "insertNulls": false, "lineInterpolation": "linear", "lineWidth": 2, "pointSize": 5, "scaleDistribution": { "type": "linear" }, "showPoints": "auto", "spanNulls": false, "stacking": { "group": "A", "mode": "none" }, "thresholdsStyle": { "mode": "off" } }, "mappings": [], "unit": "s" }, "overrides": [] }, "gridPos": { "h": 9, "w": 12, "x": 0, "y": 27 }, "id": 49, "options": { "legend": { "calcs": [], "displayMode": "list", "placement": "bottom", "showLegend": true }, "tooltip": { "mode": "multi", "sort": "none" } }, "targets": [ { "expr": "histogram_quantile(0.99, sum(rate(rocknode_publish_header_to_proof_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p99", "refId": "A" }, { "expr": "histogram_quantile(0.95, sum(rate(rocknode_publish_header_to_proof_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p95", "refId": "B" }, { "expr": "histogram_quantile(0.50, sum(rate(rocknode_publish_header_to_proof_duration_seconds_bucket[$__rate_interval])) by (le))", "legendFormat": "p50", "refId": "C" } ], "title": "Header to Proof Duration", "type": "timeseries" },
    { "datasource": { "type": "prometheus", "uid": "rocknode-prometheus" }, "fieldConfig": { "defaults": { "unit": "s" }, "overrides": [] }, "gridPos": { "h": 8, "w": 6, "x": 12, "y": 27 }, "id": 50, "options": { "colorMode": "value", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": { "calcs": [ "lastNotNull" ], "fields": "", "values": false }, "textMode": "auto" }, "targets": [ { "expr": "avg(rocknode_publish_average_header_to_proof_time_seconds)", "legendFormat": "Avg Header->Proof", "refId": "A" } ], "title": "Average Header to Proof Time", "type": "stat" }
  ],
  "refresh": "10s",
  "schemaVersion": 39,
  "style": "dark",
  "tags": [ "rock-node" ],
  "templating": { "list": [] },
  "time": { "from": "now-1h", "to": "now" },
  "timepicker": {},
  "timezone": "browser",
  "title": "Rock Node - Publish Plugin",
  "uid": "rock-node-publish-v1",
  "version": 1,
  "weekStart": ""
}
